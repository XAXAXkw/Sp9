<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button onClick="gencart()">TEST</button>

    <script>
      let a = {
        id: "Pepe",
      };
      let b = {
        id: "Hans",
      };
      let c = {
        id: "Pepe",
      };
      let d = {
        id: "Pepe",
      };
      let e = {
        id: "Maria",
      };
      let f = {
        id: "Hans",
      };
      let g = {
        id: "Pepe",
      };
      let h = {
        id: "James",
      };
      let ii = {
        id: "Maria",
      };
      let j = {
        id: "Pepe",
      };
      let cartList = [];
      let cart = [];

      cartList.push(a, b, c, d, e);

// Exercise 4 We don't use this function anymore as we refactored our code;



// function generateCart() {
//    Using the "cartlist" array that contains all the items in the shopping cart,
//    generate the "cart" array that does not contain repeated items, instead each item of this  //    array "cart" shows the quantity of product.





//   for (let i = 0; i < cartList.length; i++) {
//     let found = cart.find((item) => item.id == cartList[i].id);
//     if (found == undefined) {
//       let obj = cartList[i];
//       obj.quantity = 1;
//       cart.push(obj);
//     } else {
//       let positionOfItem = cart.indexOf(found);
//       cart[positionOfItem].quantity++;
//     }
//   }
// }





/*

function generateCart() {
	// Using the "cartlist" array that contains all the items in the shopping cart,
	// generate the "cart" array that does not contain repeated items, instead each item of this array "cart" shows the quantity of product.

	// To do @here posibilidad de hacerlo con otros métodos de array

	for (let product of cartList) {
		let foundIndex,
			found = cart.find((item, index) => {
				foundIndex = index;
				return item.id == product.id;
			});

		// found ? cart[foundIndex].quantity++ : (cart.push(product), (cart[cart.length - 1].quantity = 1));
		// El operador ternario es menos legible

		if (found) {
			cart[foundIndex].quantity++;
		} else {
			cart.push(product);
			cart[cart.length - 1].quantity = 1;
		}
	}*/
  
/*
        function gencart() {
          let i = 0;
          let j = 0;
          let k = 0;

          for ( i; i<cartList.length; i++){
            if(cart.length === 0){
              cartList[i].quantity=0;
              cart.push(cartList[i]);
            }
              for(let prod of cartList){
                if(cart[j].id===prod.id){
                  cart[j].quantity++;
                } }

                  for(let check of cart){
                    if(check.id === cartList[i].id){
                      let k = i;
                      for(k ; k < cartList.length; k++){
                        if(check.id != cartList[k].id){
                          cartList[k].quantity=1;
                          cart.push(cartList[k]);
                          j++;
                          break;
                        
                      }
                   
                  }
                }
              }
            }
          }


        
        
        
        
        
        
        
        
        { 
          let j = 0;
          for(let i=0;i<cartList.length;i++){



            if(cart.length===0){
              cartList[i].quantity = 0;
              cart.push(cartList[i]);
            }
            
            
            else{
              for(let found of cartList){
                if(cart[j].id=== found.id){
                  cart[j].quantity++;
                }
              }
            for(let prod of cart){
              if(prod.id === cartList[i]){
                i++;}
                 

                
                
                
                } cartList[i].quantity=0;
                  cart.push(cartList[i]);
                  j++;
                  for(let found of cartList){
                if(cart[j].id=== found.id){
                  cart[j].quantity++;
                }
              }
            }
          }}*/
          
          


       
        

        
            
        
/*
   for(let i = 0; i<cartList.length; i++){
            if (cart.length===0){
                cartList[i].quantity = 0;
                cart.push(cartList[i]);
                
            }  else if (cart.length != 0) {
                
                for (let prod of cartList){
                 if(prod.id === cart[i-1].id){
                    cart[i-1].quantity++;
                 }
                }cartList[i].quantity = 0;
                cart.push(cartList[i])

            }
            
           }*/
      


        /*
        cartList[0].quantity = 1;
        cart.push(cartList[0]);
        cartList.splice(0, 1);

        cartList.forEach(myFunction);

        

        function myFunction() {

        let i = 0;
        
            for (let o of cartList){
          for (let j = 0; j < cartList.length; j++) {
            if (cart[i].id === cartList[j].id) {
              cart[i].quantity += 1;
              cartList.splice(j, 1);
              j--;
            }
          }
          if (cartList.length != 1){
          cartList[i].quantity=1;
          cart.push(cartList[i]);
          cartList.splice(i, 1);
          i++;
        }else {
            let i=0;
            cartList[i].quantity=1;
          cart.push(cartList[i]);
          cartList.splice(i, 1);
        }

        }}
      }*/

      /*
    
            let i= 0;
           

            for(i; i < cartList.length; i++){
        cartList[i].quantity=1;
       cart.push(cartList[i]);
       cartList.splice(i,1);
       
 let j= 0;
       for(j; j < cartList.length; j++){
        if(cart[i].id===cartList[j].id){
            cart[i].quantity += 1;
            cartList.splice(j,1);
            j--;
        }
       }i--;

}
      }*/

      /*
        let i = 0;
        

        // loop de cart[i] quan es fa el seguent push:

        for (i; i < cartList.length; i++) {
          if (i === 0) {
            cart.push(cartList[i]);
            cartList.splice(i,1);
            cart[i].quantity = 1;
          } else {
            cart.push(cartList[i]);
            cart[i].quantity = 0;
            cartList.splice(i,1);
          }
          // for (j; j < cartList.length; j++) {

          // LOOP bo per ADDING QUANTITY - cart[i] és el que cal itinerar, abans cal fer el push de ++i

          for(let x of cartList) {
            if (x.id === cart[i].id) {
              console.log("es igual");
              ++cart[i].quantity;
              let j = cartList.indexOf(x);
              cartList.splice(j,1);
              --j;
            }
          }
        }
      }*/
    </script>
  </body>
</html>
